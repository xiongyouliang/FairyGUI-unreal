# 前提
1. FairyGUI官方文档一定要看；熟悉FairyGUI的类抽象模型；了解包机制；分支功能强烈建议不要使用，用SVN做分支支持好过编辑器本身；也不会给运行时带来性能和内存的开销；
2. 重构目标只是FairyGUI的UE4 Runtime Library部分；FairyGUI编辑器，以及导出的二进制数据没有任何修改；
3. 

# 命名规范重构
* 官方的命令规格是UGXXX；比如UGObject, UGButton, UGComponent等
* 新命名规范使用UFairyXXX; 比如UFairyObject, UFairyButton, UFairyComponent等；
* 原代码中没有自己的命名空间，新增命名空间FairyGUI；主要用来框列一些不需要反射的枚举、数据封装类型；
* 源码目录结构分配不合理，会做适当的调整；
* 命名相关的重构不会一蹴而就，在重构的过程中逐步推进；


# 组件抽象层级重构

## 官方版本类抽象层级：
- ```class UGObject```充当FairyGUI所有元件的基类;
- ```class UGImage```、```class UGGraph```等绘制类元件继承自```class UGObject```;
- ```class UGComponent```继承自```class UGObject```, 并充当元件的容器;
- 其他高阶复合组件直接或间接继承自```class UGComponent```;

## 重构原因及思路

### 原抽象层级的问题：
- ```class UGComponent```过于臃肿：Controller、Transition、Clipping、Scroll等功能都集中在```class UGComponent```中；
- 因为```class UGComponent```充当了所有的复合控件的基类；在UI制作过程中，必然存在一些组件不需要相关功能的，造成额外不必要的开销；比如```class UGButton```，而Button内部逻辑是不需要Clipping、Scroll等功能的。
- 缓动功能的实现，在应用层不友好，对逻辑代码的侵入性高；
- Transition, 即编辑器中Timeline的回放实现，为了统一方便，数据结构大量的冗余；并且不同属性的Timeline放在一个switch结构中处理，难言维护性；

### UGComponent重构思路
- 将不同的功能点剥离，```class UGComponent```重点关注children的管理；
- 添加从```class UGComponent```派生的Clipping、Scroll、List等功能之独立子类，将功能逻辑代码解耦；
- 缓动、控制器、关联系统分别建立一个独立管理器类，将相关功能从class UFairyComponent类中分析出去；

不同功能点的详细重构记录参看对应的文档；
